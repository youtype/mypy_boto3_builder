
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../development/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>Architecture Documentation - Mypy Boto3 Builder</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/styles/stackoverflow-dark.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#architecture-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Mypy Boto3 Builder" class="md-header__button md-logo" aria-label="Mypy Boto3 Builder" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m23.5 17-5 5-3.5-3.5 1.5-1.5 2 2 3.5-3.5zm-10.41 3H6V4h7v5h5v4.09c.33-.05.66-.09 1-.09s.67.04 1 .09V8l-6-6H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h7.81c-.35-.61-.6-1.28-.72-2"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Mypy Boto3 Builder
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Architecture Documentation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/youtype/mypy_boto3_builder/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Mypy Boto3 Builder" class="md-nav__button md-logo" aria-label="Mypy Boto3 Builder" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m23.5 17-5 5-3.5-3.5 1.5-1.5 2 2 3.5-3.5zm-10.41 3H6V4h7v5h5v4.09c.33-.05.66-.09 1-.09s.67.04 1 .09V8l-6-6H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h7.81c-.35-.61-.6-1.28-.72-2"/></svg>

    </a>
    Mypy Boto3 Builder
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/youtype/mypy_boto3_builder/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mypy Boto3 Builder
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Architecture Documentation
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Architecture Documentation
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#high-level-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      High-Level Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-components" class="md-nav__link">
    <span class="md-ellipsis">
      Core Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-parsers-parsers" class="md-nav__link">
    <span class="md-ellipsis">
      1. Parsers (/parsers/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-structures-structures" class="md-nav__link">
    <span class="md-ellipsis">
      2. Structures (/structures/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-generators-generators" class="md-nav__link">
    <span class="md-ellipsis">
      3. Generators (/generators/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-templates-templates" class="md-nav__link">
    <span class="md-ellipsis">
      4. Templates (/templates/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-type-annotations-type_annotations" class="md-nav__link">
    <span class="md-ellipsis">
      5. Type Annotations (/type_annotations/)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-service-discovery" class="md-nav__link">
    <span class="md-ellipsis">
      1. Service Discovery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-parsing-phase" class="md-nav__link">
    <span class="md-ellipsis">
      2. Parsing Phase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-generation-phase" class="md-nav__link">
    <span class="md-ellipsis">
      3. Generation Phase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-template-rendering" class="md-nav__link">
    <span class="md-ellipsis">
      4. Template Rendering
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-extensibility" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration &amp; Extensibility
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration &amp; Extensibility">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-new-aws-services" class="md-nav__link">
    <span class="md-ellipsis">
      Adding New AWS Services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-new-target-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      Adding New Target Libraries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-type-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing Type Generation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template-caching" class="md-nav__link">
    <span class="md-ellipsis">
      Template Caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Parallel Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-management" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Management
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Strategy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unit-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Unit Tests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Integration Tests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-data" class="md-nav__link">
    <span class="md-ellipsis">
      Test Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parsing-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Parsing Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generation-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Generation Errors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      CLI Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CLI Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#command-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Command Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Interactive Mode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Future Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Future Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#potential-improvements" class="md-nav__link">
    <span class="md-ellipsis">
      Potential Improvements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scalability" class="md-nav__link">
    <span class="md-ellipsis">
      Scalability
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Contributing Guidelines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Contributing Guidelines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-features" class="md-nav__link">
    <span class="md-ellipsis">
      Adding Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-style" class="md-nav__link">
    <span class="md-ellipsis">
      Code Style
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../how_it_works/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How it works
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../how_to_build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to build type annotations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../pre_build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to use pre-built libraries
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../thank_you/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Thank you
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#high-level-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      High-Level Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-components" class="md-nav__link">
    <span class="md-ellipsis">
      Core Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-parsers-parsers" class="md-nav__link">
    <span class="md-ellipsis">
      1. Parsers (/parsers/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-structures-structures" class="md-nav__link">
    <span class="md-ellipsis">
      2. Structures (/structures/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-generators-generators" class="md-nav__link">
    <span class="md-ellipsis">
      3. Generators (/generators/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-templates-templates" class="md-nav__link">
    <span class="md-ellipsis">
      4. Templates (/templates/)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-type-annotations-type_annotations" class="md-nav__link">
    <span class="md-ellipsis">
      5. Type Annotations (/type_annotations/)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-service-discovery" class="md-nav__link">
    <span class="md-ellipsis">
      1. Service Discovery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-parsing-phase" class="md-nav__link">
    <span class="md-ellipsis">
      2. Parsing Phase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-generation-phase" class="md-nav__link">
    <span class="md-ellipsis">
      3. Generation Phase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-template-rendering" class="md-nav__link">
    <span class="md-ellipsis">
      4. Template Rendering
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-extensibility" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration &amp; Extensibility
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration &amp; Extensibility">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-new-aws-services" class="md-nav__link">
    <span class="md-ellipsis">
      Adding New AWS Services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-new-target-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      Adding New Target Libraries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#customizing-type-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing Type Generation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#template-caching" class="md-nav__link">
    <span class="md-ellipsis">
      Template Caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-processing" class="md-nav__link">
    <span class="md-ellipsis">
      Parallel Processing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-management" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Management
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Strategy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unit-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Unit Tests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#integration-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Integration Tests
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-data" class="md-nav__link">
    <span class="md-ellipsis">
      Test Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Error Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parsing-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Parsing Errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generation-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Generation Errors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cli-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      CLI Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CLI Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#command-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Command Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Interactive Mode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Future Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Future Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#potential-improvements" class="md-nav__link">
    <span class="md-ellipsis">
      Potential Improvements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scalability" class="md-nav__link">
    <span class="md-ellipsis">
      Scalability
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contributing-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Contributing Guidelines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Contributing Guidelines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-features" class="md-nav__link">
    <span class="md-ellipsis">
      Adding Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-style" class="md-nav__link">
    <span class="md-ellipsis">
      Code Style
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="architecture-documentation">Architecture Documentation<a class="headerlink" href="#architecture-documentation" title="Permanent link">#</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">#</a></h2>
<p><code>mypy-boto3-builder</code> is a code generator that creates type annotations for AWS SDK libraries (boto3, aioboto3, aiobotocore). It introspects AWS service definitions and generates Python type stubs, enabling static type checking for AWS SDK usage.</p>
<h2 id="high-level-architecture">High-Level Architecture<a class="headerlink" href="#high-level-architecture" title="Permanent link">#</a></h2>
<pre class="highlight"><code>┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   AWS Service   │    │     Parser      │    │   Generator     │
│   Definitions   │───▶│    (Extract)    │───▶│   (Transform)   │
│   (botocore)    │    │                 │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                                       │
                                                       ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│    Generated    │    │    Templates    │    │   Structures    │
│   Type Stubs    │◀───│    (Jinja2)     │◀───│  (Data Model)   │
│   (.pyi files)  │    │                 │    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘</code></pre>
<h2 id="core-components">Core Components<a class="headerlink" href="#core-components" title="Permanent link">#</a></h2>
<h3 id="1-parsers-parsers">1. Parsers (<code>/parsers/</code>)<a class="headerlink" href="#1-parsers-parsers" title="Permanent link">#</a></h3>
<p><strong>Purpose</strong>: Extract and interpret AWS service definitions from botocore</p>
<p><strong>Key Classes</strong>:
- <code>ShapeParser</code> - Converts botocore shapes to internal type representations
- <code>ClientParser</code> - Extracts client methods and their signatures
- <code>ResourceParser</code> - Handles boto3 resource definitions
- <code>ServicePackageParser</code> - Orchestrates parsing for a complete service</p>
<p><strong>Flow</strong>:
<pre class="highlight"><code class="language-python"># Example parsing flow
service_model = boto3.Session().get_service_model('s3')
parser = ServicePackageParser(service_model)
service_package = parser.parse()  # Returns ServicePackage structure</code></pre></p>
<h3 id="2-structures-structures">2. Structures (<code>/structures/</code>)<a class="headerlink" href="#2-structures-structures" title="Permanent link">#</a></h3>
<p><strong>Purpose</strong>: Internal data model representing AWS services and their components</p>
<p><strong>Key Classes</strong>:
- <code>ServicePackage</code> - Complete service definition (client, resources, paginators, etc.)
- <code>Client</code> - Service client with methods and attributes
- <code>Method</code> - Individual service operation with arguments and return types
- <code>TypeAnnotation</code> - Type system for generating Python type hints</p>
<p><strong>Design Pattern</strong>: Data Transfer Objects (DTOs) with behavior</p>
<h3 id="3-generators-generators">3. Generators (<code>/generators/</code>)<a class="headerlink" href="#3-generators-generators" title="Permanent link">#</a></h3>
<p><strong>Purpose</strong>: Convert internal structures to target library formats</p>
<p><strong>Key Classes</strong>:
- <code>BaseGenerator</code> - Common generation logic and template management
- <code>TypesBoto3Generator</code> - types-boto3 packages generation
- <code>Boto3Generator</code> - obsolete boto3-stubs packages generation
- <code>AioBoto3Generator</code> - types-aioboto3 packages generation
- <code>AioBotocoreGenerator</code> - types-aioboto3 packages generation</p>
<p><strong>Strategy Pattern</strong>: Each generator implements the same interface but produces different outputs</p>
<h3 id="4-templates-templates">4. Templates (<code>/templates/</code>)<a class="headerlink" href="#4-templates-templates" title="Permanent link">#</a></h3>
<p><strong>Purpose</strong>: Jinja2 templates for generating Python code</p>
<p><strong>Organization</strong>:
<pre class="highlight"><code>templates/
├── common/           # Shared templates
│   ├── service/      # Individual service templates
│   └── wrapper/      # Multi-service package templates
├── boto3/           # boto3-specific templates
├── types-boto3/     # types-boto3 stub templates
└── ...</code></pre></p>
<h3 id="5-type-annotations-type_annotations">5. Type Annotations (<code>/type_annotations/</code>)<a class="headerlink" href="#5-type-annotations-type_annotations" title="Permanent link">#</a></h3>
<p><strong>Purpose</strong>: Abstract type system for generating Python type hints</p>
<p><strong>Key Classes</strong>:
- <code>TypeAnnotation</code> - Base type representation
- <code>TypeSubscript</code> - Generic types (List[str], Dict[str, Any])
- <code>TypeUnion</code> - Union types (str | int)
- <code>TypeTypedDict</code> - Structured dictionary types</p>
<h2 id="data-flow">Data Flow<a class="headerlink" href="#data-flow" title="Permanent link">#</a></h2>
<h3 id="1-service-discovery">1. Service Discovery<a class="headerlink" href="#1-service-discovery" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-python"># Discover available AWS services
service_names = get_available_service_names()
# Returns: ['s3', 'ec2', 'lambda', ...]</code></pre>
<h3 id="2-parsing-phase">2. Parsing Phase<a class="headerlink" href="#2-parsing-phase" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-python"># For each service:
service_model = session.get_service_model(service_name)
parser = ServicePackageParser(service_model, service_name)
service_package = parser.parse()</code></pre>
<h3 id="3-generation-phase">3. Generation Phase<a class="headerlink" href="#3-generation-phase" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-python"># Transform to target format:
generator = Boto3Generator()
package = generator.generate_service_package(service_package)</code></pre>
<h3 id="4-template-rendering">4. Template Rendering<a class="headerlink" href="#4-template-rendering" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-python"># Render to Python code:
writer = PackageWriter(output_path)
writer.write_service_package(package, templates_path)</code></pre>
<h2 id="configuration-extensibility">Configuration &amp; Extensibility<a class="headerlink" href="#configuration-extensibility" title="Permanent link">#</a></h2>
<h3 id="adding-new-aws-services">Adding New AWS Services<a class="headerlink" href="#adding-new-aws-services" title="Permanent link">#</a></h3>
<ol>
<li>Service is automatically discovered via botocore</li>
<li>Parser extracts service definition</li>
<li>Generator applies library-specific transformations</li>
<li>Templates render the final Python code</li>
</ol>
<h3 id="adding-new-target-libraries">Adding New Target Libraries<a class="headerlink" href="#adding-new-target-libraries" title="Permanent link">#</a></h3>
<ol>
<li>Create new generator inheriting from <code>BaseGenerator</code></li>
<li>Implement library-specific logic</li>
<li>Create corresponding Jinja2 templates</li>
<li>Register in CLI options</li>
</ol>
<h3 id="customizing-type-generation">Customizing Type Generation<a class="headerlink" href="#customizing-type-generation" title="Permanent link">#</a></h3>
<p>Type mappings are configured in <code>/type_maps/</code>:
- <code>shape_type_map.py</code> - Maps AWS shapes to Python types
- <code>method_type_map.py</code> - Override method signatures
- <code>literal_type_map.py</code> - Define literal value types</p>
<h2 id="performance-considerations">Performance Considerations<a class="headerlink" href="#performance-considerations" title="Permanent link">#</a></h2>
<h3 id="template-caching">Template Caching<a class="headerlink" href="#template-caching" title="Permanent link">#</a></h3>
<p>Templates are cached per process to avoid re-parsing Jinja2:</p>
<pre class="highlight"><code class="language-python">@lru_cache(maxsize=None)
def get_template(template_path: Path) -&gt; Template:
    return jinja_env.get_template(str(template_path))</code></pre>
<h3 id="parallel-processing">Parallel Processing<a class="headerlink" href="#parallel-processing" title="Permanent link">#</a></h3>
<p>Services can be processed independently:</p>
<pre class="highlight"><code class="language-python"># Current: Sequential
for service in services:
    generate_product(product)

# Potential: Parallel
with ThreadPoolExecutor() as executor:
    futures = [executor.submit(generate_product, s) for s in products]</code></pre>
<h3 id="memory-management">Memory Management<a class="headerlink" href="#memory-management" title="Permanent link">#</a></h3>
<p>Large service definitions are processed incrementally to manage memory usage.</p>
<h2 id="testing-strategy">Testing Strategy<a class="headerlink" href="#testing-strategy" title="Permanent link">#</a></h2>
<h3 id="unit-tests">Unit Tests<a class="headerlink" href="#unit-tests" title="Permanent link">#</a></h3>
<ul>
<li><strong>Parsers</strong>: Test shape conversion and type mapping</li>
<li><strong>Generators</strong>: Test output format correctness</li>
<li><strong>Structures</strong>: Test data model consistency</li>
</ul>
<h3 id="integration-tests">Integration Tests<a class="headerlink" href="#integration-tests" title="Permanent link">#</a></h3>
<ul>
<li><strong>End-to-end</strong>: Generate complete packages and verify compilability</li>
<li><strong>Type checking</strong>: Ensure generated stubs pass mypy/pyright validation</li>
<li><strong>Runtime</strong>: Test generated code works with actual AWS services</li>
</ul>
<h3 id="test-data">Test Data<a class="headerlink" href="#test-data" title="Permanent link">#</a></h3>
<ul>
<li>Mock AWS service definitions for consistent testing</li>
<li>Real service samples for integration validation</li>
</ul>
<h2 id="error-handling">Error Handling<a class="headerlink" href="#error-handling" title="Permanent link">#</a></h2>
<h3 id="parsing-errors">Parsing Errors<a class="headerlink" href="#parsing-errors" title="Permanent link">#</a></h3>
<ul>
<li>Graceful degradation when service definitions are incomplete</li>
<li>Detailed error messages with service/shape context</li>
<li>Fallback to basic types when complex shapes fail</li>
</ul>
<h3 id="generation-errors">Generation Errors<a class="headerlink" href="#generation-errors" title="Permanent link">#</a></h3>
<ul>
<li>Template rendering failures with clear error context</li>
<li>Type resolution errors with suggested fixes</li>
<li>Validation of generated code before output</li>
</ul>
<h2 id="cli-architecture">CLI Architecture<a class="headerlink" href="#cli-architecture" title="Permanent link">#</a></h2>
<h3 id="command-structure">Command Structure<a class="headerlink" href="#command-structure" title="Permanent link">#</a></h3>
<pre class="highlight"><code>mypy-boto3-builder
├── --product &lt;product_name&gt; --services &lt;AWS SDK services&gt; # Generate type stubs
└── chat             # Interactive configuration</code></pre>
<h3 id="interactive-mode">Interactive Mode<a class="headerlink" href="#interactive-mode" title="Permanent link">#</a></h3>
<p>Uses <code>questionary</code> for complex configuration:
- Service selection
- Output format choice
- Custom type mappings</p>
<h2 id="future-considerations">Future Considerations<a class="headerlink" href="#future-considerations" title="Permanent link">#</a></h2>
<h3 id="potential-improvements">Potential Improvements<a class="headerlink" href="#potential-improvements" title="Permanent link">#</a></h3>
<ol>
<li><strong>Async processing</strong> for faster generation</li>
<li><strong>Incremental builds</strong> to avoid regenerating unchanged services</li>
<li><strong>Caching layer</strong> for parsed service definitions</li>
<li><strong>Botocore support</strong> for usage without <code>boto3</code></li>
</ol>
<h3 id="scalability">Scalability<a class="headerlink" href="#scalability" title="Permanent link">#</a></h3>
<ul>
<li>Current architecture handles 400+ AWS services</li>
<li>Memory usage scales linearly with service count</li>
<li>Generation time is dominated by template rendering</li>
</ul>
<h2 id="contributing-guidelines">Contributing Guidelines<a class="headerlink" href="#contributing-guidelines" title="Permanent link">#</a></h2>
<h3 id="adding-features">Adding Features<a class="headerlink" href="#adding-features" title="Permanent link">#</a></h3>
<ol>
<li>Start with unit tests for new functionality</li>
<li>Update relevant parsers/generators/structures</li>
<li>Add templates if new output format is needed</li>
<li>Update integration tests</li>
<li>Document changes in architecture docs</li>
</ol>
<h3 id="code-style">Code Style<a class="headerlink" href="#code-style" title="Permanent link">#</a></h3>
<ul>
<li>Follow existing patterns and naming conventions</li>
<li>Use type hints for all public APIs</li>
<li>Add docstrings for complex logic</li>
<li>Keep functions focused and testable</li>
</ul>
<hr />
<p><em>This architecture supports generating type annotations for 400+ AWS services across multiple Python AWS SDK libraries, enabling static type checking for millions of lines of AWS SDK usage.</em></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.instant", "navigation.tracking", "content.code.annotate"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.10.0/highlight.min.js"></script>
      
        <script src="../js/highlight.js"></script>
      
    
  </body>
</html>
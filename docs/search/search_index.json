{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Mypy Boto3 Builder","text":"<p>Type annotations generator for types-boto3, boto3-stubs, types-aiobotocore, and types-aioboto3 projects. Compatible with VSCode, PyCharm, Emacs, Sublime Text, mypy, pyright and other tools.</p> <p>See how it helps to find and fix potential bugs:</p> <p></p> <ul> <li>Mypy Boto3 Builder</li> <li>Quickstart</li> <li>Type annotations documentation</li> <li>Versioning</li> <li>Latest changes</li> </ul>"},{"location":"#quickstart","title":"Quickstart","text":"<ul> <li>Install uv</li> <li>Run <code>uvx mypy-boto3-builder</code></li> <li>Answer some questions, get your custom package</li> <li>Install a generated package</li> </ul>"},{"location":"#type-annotations-documentation","title":"Type annotations documentation","text":"<ul> <li>If you use <code>boto3</code> or <code>botocore</code>, follow types-boto3 documentation</li> <li>For <code>aiobotocore</code> follow types-aiobotocore documentation</li> <li>For <code>aioboto3</code> follow types-aioboto3 documentation</li> </ul>"},{"location":"#versioning","title":"Versioning","text":"<p><code>mypy_boto3_builder</code> version is not related to <code>boto3</code> version and follows Python Packaging version specifiers.</p>"},{"location":"#latest-changes","title":"Latest changes","text":"<p>Full changelog can be found in Releases.</p>"},{"location":"architecture/","title":"Architecture Documentation","text":""},{"location":"architecture/#overview","title":"Overview","text":"<p><code>mypy-boto3-builder</code> is a code generator that creates type annotations for AWS SDK libraries (boto3, aioboto3, aiobotocore). It introspects AWS service definitions and generates Python type stubs, enabling static type checking for AWS SDK usage.</p>"},{"location":"architecture/#high-level-architecture","title":"High-Level Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   AWS Service   \u2502    \u2502     Parser      \u2502    \u2502   Generator     \u2502\n\u2502   Definitions   \u2502\u2500\u2500\u2500\u25b6\u2502    (Extract)    \u2502\u2500\u2500\u2500\u25b6\u2502   (Transform)   \u2502\n\u2502   (botocore)    \u2502    \u2502                 \u2502    \u2502                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                                       \u2502\n                                                       \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    Generated    \u2502    \u2502    Templates    \u2502    \u2502   Structures    \u2502\n\u2502   Type Stubs    \u2502\u25c0\u2500\u2500\u2500\u2502    (Jinja2)     \u2502\u25c0\u2500\u2500\u2500\u2502  (Data Model)   \u2502\n\u2502   (.pyi files)  \u2502    \u2502                 \u2502    \u2502                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518</code></pre>"},{"location":"architecture/#core-components","title":"Core Components","text":""},{"location":"architecture/#1-parsers-parsers","title":"1. Parsers (<code>/parsers/</code>)","text":"<p>Purpose: Extract and interpret AWS service definitions from botocore</p> <p>Key Classes: - <code>ShapeParser</code> - Converts botocore shapes to internal type representations - <code>ClientParser</code> - Extracts client methods and their signatures - <code>ResourceParser</code> - Handles boto3 resource definitions - <code>ServicePackageParser</code> - Orchestrates parsing for a complete service</p> <p>Flow: <pre><code># Example parsing flow\nservice_model = boto3.Session().get_service_model('s3')\nparser = ServicePackageParser(service_model)\nservice_package = parser.parse()  # Returns ServicePackage structure</code></pre></p>"},{"location":"architecture/#2-structures-structures","title":"2. Structures (<code>/structures/</code>)","text":"<p>Purpose: Internal data model representing AWS services and their components</p> <p>Key Classes: - <code>ServicePackage</code> - Complete service definition (client, resources, paginators, etc.) - <code>Client</code> - Service client with methods and attributes - <code>Method</code> - Individual service operation with arguments and return types - <code>TypeAnnotation</code> - Type system for generating Python type hints</p> <p>Design Pattern: Data Transfer Objects (DTOs) with behavior</p>"},{"location":"architecture/#3-generators-generators","title":"3. Generators (<code>/generators/</code>)","text":"<p>Purpose: Convert internal structures to target library formats</p> <p>Key Classes: - <code>BaseGenerator</code> - Common generation logic and template management - <code>TypesBoto3Generator</code> - types-boto3 packages generation - <code>Boto3Generator</code> - obsolete boto3-stubs packages generation - <code>AioBoto3Generator</code> - types-aioboto3 packages generation - <code>AioBotocoreGenerator</code> - types-aioboto3 packages generation</p> <p>Strategy Pattern: Each generator implements the same interface but produces different outputs</p>"},{"location":"architecture/#4-templates-templates","title":"4. Templates (<code>/templates/</code>)","text":"<p>Purpose: Jinja2 templates for generating Python code</p> <p>Organization: <pre><code>templates/\n\u251c\u2500\u2500 common/           # Shared templates\n\u2502   \u251c\u2500\u2500 service/      # Individual service templates\n\u2502   \u2514\u2500\u2500 wrapper/      # Multi-service package templates\n\u251c\u2500\u2500 boto3/           # boto3-specific templates\n\u251c\u2500\u2500 types-boto3/     # types-boto3 stub templates\n\u2514\u2500\u2500 ...</code></pre></p>"},{"location":"architecture/#5-type-annotations-type_annotations","title":"5. Type Annotations (<code>/type_annotations/</code>)","text":"<p>Purpose: Abstract type system for generating Python type hints</p> <p>Key Classes: - <code>TypeAnnotation</code> - Base type representation - <code>TypeSubscript</code> - Generic types (List[str], Dict[str, Any]) - <code>TypeUnion</code> - Union types (str | int) - <code>TypeTypedDict</code> - Structured dictionary types</p>"},{"location":"architecture/#data-flow","title":"Data Flow","text":""},{"location":"architecture/#1-service-discovery","title":"1. Service Discovery","text":"<pre><code># Discover available AWS services\nservice_names = get_available_service_names()\n# Returns: ['s3', 'ec2', 'lambda', ...]</code></pre>"},{"location":"architecture/#2-parsing-phase","title":"2. Parsing Phase","text":"<pre><code># For each service:\nservice_model = session.get_service_model(service_name)\nparser = ServicePackageParser(service_model, service_name)\nservice_package = parser.parse()</code></pre>"},{"location":"architecture/#3-generation-phase","title":"3. Generation Phase","text":"<pre><code># Transform to target format:\ngenerator = Boto3Generator()\npackage = generator.generate_service_package(service_package)</code></pre>"},{"location":"architecture/#4-template-rendering","title":"4. Template Rendering","text":"<pre><code># Render to Python code:\nwriter = PackageWriter(output_path)\nwriter.write_service_package(package, templates_path)</code></pre>"},{"location":"architecture/#configuration-extensibility","title":"Configuration &amp; Extensibility","text":""},{"location":"architecture/#adding-new-aws-services","title":"Adding New AWS Services","text":"<ol> <li>Service is automatically discovered via botocore</li> <li>Parser extracts service definition</li> <li>Generator applies library-specific transformations</li> <li>Templates render the final Python code</li> </ol>"},{"location":"architecture/#adding-new-target-libraries","title":"Adding New Target Libraries","text":"<ol> <li>Create new generator inheriting from <code>BaseGenerator</code></li> <li>Implement library-specific logic</li> <li>Create corresponding Jinja2 templates</li> <li>Register in CLI options</li> </ol>"},{"location":"architecture/#customizing-type-generation","title":"Customizing Type Generation","text":"<p>Type mappings are configured in <code>/type_maps/</code>: - <code>shape_type_map.py</code> - Maps AWS shapes to Python types - <code>method_type_map.py</code> - Override method signatures - <code>literal_type_map.py</code> - Define literal value types</p>"},{"location":"architecture/#performance-considerations","title":"Performance Considerations","text":""},{"location":"architecture/#template-caching","title":"Template Caching","text":"<p>Templates are cached per process to avoid re-parsing Jinja2:</p> <pre><code>@lru_cache(maxsize=None)\ndef get_template(template_path: Path) -&gt; Template:\n    return jinja_env.get_template(str(template_path))</code></pre>"},{"location":"architecture/#parallel-processing","title":"Parallel Processing","text":"<p>Services can be processed independently:</p> <pre><code># Current: Sequential\nfor service in services:\n    generate_product(product)\n\n# Potential: Parallel\nwith ThreadPoolExecutor() as executor:\n    futures = [executor.submit(generate_product, s) for s in products]</code></pre>"},{"location":"architecture/#memory-management","title":"Memory Management","text":"<p>Large service definitions are processed incrementally to manage memory usage.</p>"},{"location":"architecture/#testing-strategy","title":"Testing Strategy","text":""},{"location":"architecture/#unit-tests","title":"Unit Tests","text":"<ul> <li>Parsers: Test shape conversion and type mapping</li> <li>Generators: Test output format correctness</li> <li>Structures: Test data model consistency</li> </ul>"},{"location":"architecture/#integration-tests","title":"Integration Tests","text":"<ul> <li>End-to-end: Generate complete packages and verify compilability</li> <li>Type checking: Ensure generated stubs pass mypy/pyright validation</li> <li>Runtime: Test generated code works with actual AWS services</li> </ul>"},{"location":"architecture/#test-data","title":"Test Data","text":"<ul> <li>Mock AWS service definitions for consistent testing</li> <li>Real service samples for integration validation</li> </ul>"},{"location":"architecture/#error-handling","title":"Error Handling","text":""},{"location":"architecture/#parsing-errors","title":"Parsing Errors","text":"<ul> <li>Graceful degradation when service definitions are incomplete</li> <li>Detailed error messages with service/shape context</li> <li>Fallback to basic types when complex shapes fail</li> </ul>"},{"location":"architecture/#generation-errors","title":"Generation Errors","text":"<ul> <li>Template rendering failures with clear error context</li> <li>Type resolution errors with suggested fixes</li> <li>Validation of generated code before output</li> </ul>"},{"location":"architecture/#cli-architecture","title":"CLI Architecture","text":""},{"location":"architecture/#command-structure","title":"Command Structure","text":"<pre><code>mypy-boto3-builder\n\u251c\u2500\u2500 --product &lt;product_name&gt; --services &lt;AWS SDK services&gt; # Generate type stubs\n\u2514\u2500\u2500 chat             # Interactive configuration</code></pre>"},{"location":"architecture/#interactive-mode","title":"Interactive Mode","text":"<p>Uses <code>questionary</code> for complex configuration: - Service selection - Output format choice - Custom type mappings</p>"},{"location":"architecture/#future-considerations","title":"Future Considerations","text":""},{"location":"architecture/#potential-improvements","title":"Potential Improvements","text":"<ol> <li>Async processing for faster generation</li> <li>Incremental builds to avoid regenerating unchanged services</li> <li>Caching layer for parsed service definitions</li> <li>Botocore support for usage without <code>boto3</code></li> </ol>"},{"location":"architecture/#scalability","title":"Scalability","text":"<ul> <li>Current architecture handles 400+ AWS services</li> <li>Memory usage scales linearly with service count</li> <li>Generation time is dominated by template rendering</li> </ul>"},{"location":"architecture/#contributing-guidelines","title":"Contributing Guidelines","text":""},{"location":"architecture/#adding-features","title":"Adding Features","text":"<ol> <li>Start with unit tests for new functionality</li> <li>Update relevant parsers/generators/structures</li> <li>Add templates if new output format is needed</li> <li>Update integration tests</li> <li>Document changes in architecture docs</li> </ol>"},{"location":"architecture/#code-style","title":"Code Style","text":"<ul> <li>Follow existing patterns and naming conventions</li> <li>Use type hints for all public APIs</li> <li>Add docstrings for complex logic</li> <li>Keep functions focused and testable</li> </ul> <p>This architecture supports generating type annotations for 400+ AWS services across multiple Python AWS SDK libraries, enabling static type checking for millions of lines of AWS SDK usage.</p>"},{"location":"development/","title":"Development","text":"<ul> <li>Install uv: <code>curl -LsSf https://astral.sh/uv/install.sh | sh</code></li> <li>Install dependencies: <code>uv sync --all-extras --dev</code></li> <li>Use scripts for repo to check if everything works: <code>./scripts/build.sh</code></li> <li>Run manual pre-commit: <code>./scripts/before_commit.sh</code></li> </ul>"},{"location":"how_it_works/","title":"How it works","text":"<p>Fully automated mypy-boto3-builder carefully generates type annotations for each service, patiently waiting for <code>boto3</code> updates. It delivers drop-in type annotations for you and makes sure that:</p> <ul> <li>All available <code>botocore</code> services are covered.</li> <li>Each public class and method of every <code>botocore</code> service gets valid type annotations   extracted from <code>botocore</code> schemas.</li> <li>Type annotations include up-to-date documentation.</li> <li>Link to documentation is provided for every method.</li> <li>Code is processed by ruff for readability.</li> </ul>"},{"location":"how_to_build/","title":"How to build type annotations","text":"<ul> <li>How to build type annotations</li> <li>With your personal assistant (recommended)</li> <li>With CLI</li> <li>With Docker image</li> </ul>"},{"location":"how_to_build/#with-your-personal-assistant-recommended","title":"With your personal assistant (recommended)","text":"<ul> <li>Install uv</li> </ul> <pre><code># run builder and chat with him :)\nuvx mypy_boto3_builder\n\n# set library version explicitly for better results\nuvx --with 'boto3==1.35.71' mypy-boto3-builder</code></pre>"},{"location":"how_to_build/#with-cli","title":"With CLI","text":"<pre><code># Install preferred version of `boto3`\npython -m pip install boto3==1.35.71 botocore==1.35.71\n\n# Install `mypy-boto3-builder`\npython -m pip install mypy-boto3-builder\n\n# Build all packages in typings directory\npython -m mypy_boto3_builder ./typings --product types-boto3 types-boto3-services --output-type wheel\n\n# Or specify required services explicitly\npython -m mypy_boto3_builder ./typings --product types-boto3 types-boto3-services --output-type wheel -s ec2 s3\n\n# Install custom `types-boto3` packages\npython -m pip install ./typings/*.whl</code></pre>"},{"location":"how_to_build/#with-docker-image","title":"With Docker image","text":"<ul> <li>Install Docker</li> <li>Pull latest <code>mypy_boto3_builder</code> version and tag it</li> </ul> <pre><code>docker pull docker.pkg.github.com/youtype/mypy_boto3_builder/mypy_boto3_builder_stable:latest\ndocker tag docker.pkg.github.com/youtype/mypy_boto3_builder/mypy_boto3_builder_stable:latest mypy_boto3_builder</code></pre> <ul> <li>Generate stubs in <code>output</code> directory</li> </ul> <pre><code>mkdir output\n\n# generate stubs for all services\ndocker run -v `pwd`/output:/output -ti mypy_boto3_builder_stable\n\n# generate stubs for s3 service\ndocker run -v `pwd`/output:/output -ti mypy_boto3_builder_stable -s s3\n\n# generate stubs for a specific boto3 version\ndocker run -e BOTO3_VERSION=1.35.71 BOTOCORE_VERSION=1.35.71 -v `pwd`/output:/output -ti mypy_boto3_builder_stable</code></pre> <ul> <li>Install packages from <code>output</code> directory as described above</li> </ul>"},{"location":"pre_build/","title":"How to use pre-built libraries","text":"<ul> <li>How to use pre-built libraries</li> <li>boto3 and botocore</li> <li>aiobotocore</li> <li>aioboto3</li> </ul>"},{"location":"pre_build/#boto3-and-botocore","title":"boto3 and botocore","text":"<p>Check types-boto3 project for installation and usage instructions.</p> <p>If you use VSCode, add AWS Boto3 extension to your VSCode and run <code>AWS boto3: Quick Start</code> command.</p> <p>If not, just install <code>types-boto3</code> with <code>pip</code>:</p> <pre><code>python -m pip install 'types-boto3[essential]'\n\n# Lite version does not provide session.client/resource overloads\n# it is more RAM-friendly, but requires explicit type annotations\npython -m pip install 'types-boto3-lite[essential]'\n\n# do not forget to install mypy or pyright</code></pre> <p>That's it! You should already have code completion and type checking in your IDE.</p> <p>Check types-boto3 documentation for more details.</p>"},{"location":"pre_build/#aiobotocore","title":"aiobotocore","text":"<p>Check types-aiobotocore project for installation and usage instructions.</p> <p>Or just install <code>types-aiobotocore</code> with <code>pip</code>:</p> <pre><code>python -m pip install 'types-aiobotocore[essential]'\n\n# Lite version does not provide session.create_client overloads\n# it is more RAM-friendly, but requires explicit type annotations\npython -m pip install 'types-aiobotocore-lite[essential]'\n\n# do not forget to install mypy or pyright</code></pre> <p>Ready to go! Enjoy code completion and type checking in your <code>aiobotocore</code> project.</p> <p>Check types-aiobotocore documentation for more details.</p>"},{"location":"pre_build/#aioboto3","title":"aioboto3","text":"<p>Check types-aioboto3 project for installation and usage instructions.</p> <p>Or just install <code>types-aioboto3</code> with <code>pip</code>:</p> <pre><code>python -m pip install 'types-aioboto3[essential]'\n\n# Lite version does not provide session.client/resource overloads\n# it is more RAM-friendly, but requires explicit type annotations\npython -m pip install 'types-aioboto3-lite[essential]'\n\n# do not forget to install mypy or pyright</code></pre> <p>Whoa! All <code>aioboto3</code> methods and attributes are now type annotated and even code completion works.</p> <p>Check types-aioboto3 documentation for more details.</p>"},{"location":"thank_you/","title":"Thank you","text":""},{"location":"thank_you/#toolset","title":"Toolset","text":"<ul> <li>black developers for an awesome formatting tool</li> <li>Timothy Edmund Crosley for   isort and how flexible it is</li> <li>mypy developers for doing all dirty work for us</li> <li>pyright team for the new era of typed Python</li> <li>ruff developers for the fastest swiss knife for Python</li> </ul>"},{"location":"thank_you/#contributors","title":"Contributors","text":"<ul> <li>Allie Fitter, author of original   boto3-type-annotations</li> <li>jbpratt</li> <li>Chris Hollinworth</li> <li>Yoan Blanc</li> <li>Kostya Leschenko</li> <li>pyto86</li> <li>Ashton Honnecke</li> <li>Mike Carey</li> <li>Ole-Martin Bratteng</li> <li>Nikhil Benesch</li> <li>Maksym Balatsko</li> <li>Jacob</li> <li>Jakob Keller</li> <li>Ari Pollak</li> </ul>"}]}